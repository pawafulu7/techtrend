# /improve - Worktree並行開発での改善作業

## 目的
パフォーマンス改善やリファクタリングを**独立したworktree環境**で実施します。

## 注意事項
- 常にultrathinkでしっかりと考えて作業を行うこと
- コード中に絵文字は使用されるべきではありません
- 必要であればserenaMCPを用いて、改善対象の現状分析と影響範囲を詳細調査すること
- 改善前後の定量的な比較（パフォーマンス測定等）を必ず実施すること

## 実行手順

1. **Worktree環境を自動作成**
   - `./worktree.sh auto "{改善内容の説明}"` を実行
   - 自動的にブランチ名生成（improve/xxx-YYYYMMDD-HHMMSS）
   - 独立した改善環境作成

2. **作業ディレクトリに移動**
   - `cd ../techtrend-improve-xxx` で移動
   - パフォーマンス測定用の清潔な環境

3. **現状分析**
   - パフォーマンス測定（ベンチマーク）
   - ボトルネック特定
   - 改善ポイントの洗い出し

4. **改善実施**
   - コードの最適化
   - アルゴリズムの改良
   - キャッシュ戦略の実装
   - 不要なコードの削除

5. **効果測定**
   - 改善前後のパフォーマンス比較
   - `npm run build` でビルドサイズ確認
   - Lighthouse等でのスコア測定

6. **テスト実行**
   - `npm test` で機能が壊れていないか確認
   - `npm run test:e2e` で統合テスト
   - パフォーマンステスト実行

7. **コミット**
   - `git add .`
   - `git commit -m "perf: {改善内容}"`
   - 改善効果を数値で記載

8. **Pull Request作成**
   - `../techtrend/worktree.sh pr "perf: {改善内容}"` を実行
   - 改善前後の比較データを含むPR説明
   - ベンチマーク結果を添付

9. **クリーンアップ**
   - PRマージ後、`./worktree.sh cleanup improve-xxx` で環境削除

## 重要事項

- **測定重視**: 改善前後の定量的な比較が必須
- **段階的改善**: 大きな変更は複数のPRに分割
- **後方互換性**: 既存機能を壊さない
- **ドキュメント更新**: 改善内容を記録

## 使用例

```
ユーザー: /improve APIレスポンスを高速化してください

実行内容:
1. ./worktree.sh auto "APIレスポンスの高速化"
2. cd ../techtrend-improve-api-speed-20250823-180000
3. 現在のレスポンス時間測定
4. クエリ最適化、キャッシュ実装
5. 改善後のレスポンス時間測定
6. git commit -m "perf: APIレスポンスを50%高速化"
7. ../techtrend/worktree.sh pr "perf: APIレスポンスの高速化"
```

## 改善の種類と例

### パフォーマンス改善
- データベースクエリ最適化
- キャッシュ戦略の実装
- バンドルサイズ削減
- レンダリング最適化

### コード品質改善
- リファクタリング
- 技術的負債の解消
- 型安全性の向上
- テストカバレッジ向上

### UX改善
- ローディング時間短縮
- レスポンシブ対応
- アクセシビリティ向上

## 他のコマンドとの違い

- `/implement`: 新機能の追加
- `/fix`: バグ修正
- `/improve`: **パフォーマンス・品質改善**（このコマンド）
- 全て独立したworktree環境で並行作業可能