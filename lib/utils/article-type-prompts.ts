/**
 * è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
 * å„è¨˜äº‹ã‚¿ã‚¤ãƒ—ã«æœ€é©åŒ–ã•ã‚ŒãŸè¦ç´„ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å®šç¾©
 */

import { ArticleType } from './article-type-detector';

export interface ArticleTypePrompt {
  type: ArticleType;
  systemPrompt: string;
  analysisPoints: string[];
  outputFormat: string;
}

/**
 * è¨˜äº‹ã‚¿ã‚¤ãƒ—åˆ¥ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
 */
export const ARTICLE_TYPE_PROMPTS: Record<ArticleType, ArticleTypePrompt> = {
  'release': {
    type: 'release',
    systemPrompt: 'æ–°æ©Ÿèƒ½ãƒªãƒªãƒ¼ã‚¹è¨˜äº‹ã¨ã—ã¦åˆ†æã—ã¦ãã ã•ã„ã€‚',
    analysisPoints: [
      'æ–°æ©Ÿèƒ½ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®æ¦‚è¦ã¨ä¸»è¦ãªç‰¹å¾´',
      'ãƒªãƒªãƒ¼ã‚¹ã®èƒŒæ™¯ã‚„é–‹ç™ºã®å‹•æ©Ÿ',
      'å…·ä½“çš„ãªåˆ©ç”¨æ–¹æ³•ã‚„ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †',
      'æƒ³å®šã•ã‚Œã‚‹åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼',
      'æ–™é‡‘ä½“ç³»ã€åˆ©ç”¨å¯èƒ½åœ°åŸŸã€åˆ¶ç´„äº‹é …'
    ],
    outputFormat: `è©³ç´°è¦ç´„:
ä»¥ä¸‹ã®è¦ç´ ã‚’ç®‡æ¡æ›¸ãã§è¨˜è¼‰ï¼ˆå„é …ç›®ã¯ã€Œãƒ»ã€ã§é–‹å§‹ï¼‰ï¼š
ãƒ»æ–°æ©Ÿèƒ½ã®æ¦‚è¦ï¼ˆã©ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‹ã€ä½•ãŒæ–°ã—ã„ã‹ï¼‰
ãƒ»ä¸»ãªæ©Ÿèƒ½ãƒ»ç‰¹å¾´ï¼ˆç®‡æ¡æ›¸ãã§3-5å€‹ã®ä¸»è¦æ©Ÿèƒ½ï¼‰
ãƒ»åˆ©ç”¨æ–¹æ³•ãƒ»æ‰‹é †ï¼ˆå…·ä½“çš„ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚„ä½¿ç”¨é–‹å§‹æ–¹æ³•ï¼‰
ãƒ»å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆèª°ã«ã¨ã£ã¦æœ‰ç”¨ã‹ã€ã©ã®ã‚ˆã†ãªå ´é¢ã§ä½¿ã†ã‹ï¼‰
ãƒ»æ–™é‡‘ãƒ»åˆ¶ç´„äº‹é …ï¼ˆã‚³ã‚¹ãƒˆã€åˆ©ç”¨åˆ¶é™ã€å‰ææ¡ä»¶ãªã©ï¼‰`
  },

  'problem-solving': {
    type: 'problem-solving',
    systemPrompt: 'æŠ€è¡“çš„å•é¡Œè§£æ±ºè¨˜äº‹ã¨ã—ã¦åˆ†æã—ã¦ãã ã•ã„ã€‚',
    analysisPoints: [
      'è¨˜äº‹ã®ä¸»è¦ãªãƒˆãƒ”ãƒƒã‚¯ã¨æŠ€è¡“çš„ãªç„¦ç‚¹',
      'è§£æ±ºã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹å•é¡Œã‚„èª²é¡Œ',
      'æç¤ºã•ã‚Œã¦ã„ã‚‹è§£æ±ºç­–ã‚„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ',
      'å®Ÿè£…ã®å…·ä½“ä¾‹ã‚„ã‚³ãƒ¼ãƒ‰ã®æœ‰ç„¡',
      'æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœã¨æ³¨æ„ç‚¹'
    ],
    outputFormat: `è©³ç´°è¦ç´„:
ä»¥ä¸‹ã®è¦ç´ ã‚’æŠ€è¡“çš„ã«è©³ã—ãç®‡æ¡æ›¸ãã§è¨˜è¼‰ï¼ˆå„é …ç›®ã¯ã€Œãƒ»ã€ã§é–‹å§‹ï¼‰ï¼š
ãƒ»æŠ€è¡“çš„èƒŒæ™¯ï¼ˆä½¿ç”¨æŠ€è¡“ã€å‰æçŸ¥è­˜ï¼‰
ãƒ»è§£æ±ºã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹å…·ä½“çš„ãªå•é¡Œã¨ç¾çŠ¶ã®èª²é¡Œ
ãƒ»æç¤ºã•ã‚Œã¦ã„ã‚‹è§£æ±ºç­–ã®æŠ€è¡“çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ç­‰ï¼‰
ãƒ»å®Ÿè£…æ–¹æ³•ã®è©³ç´°ï¼ˆå…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ã€è¨­å®šæ–¹æ³•ã€æ‰‹é †ï¼‰
ãƒ»æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœã¨æ€§èƒ½æ”¹å–„ã®æŒ‡æ¨™ï¼ˆæ•°å€¤ãŒã‚ã‚Œã°å«ã‚ã‚‹ï¼‰
ãƒ»å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹ã€åˆ¶ç´„äº‹é …ã€å¿…è¦ãªç’°å¢ƒ`
  },

  'tutorial': {
    type: 'tutorial',
    systemPrompt: 'ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«è¨˜äº‹ã¨ã—ã¦åˆ†æã—ã¦ãã ã•ã„ã€‚',
    analysisPoints: [
      'å­¦ç¿’ç›®æ¨™ã¨ã‚´ãƒ¼ãƒ«',
      'å¿…è¦ãªå‰æçŸ¥è­˜ã¨ç’°å¢ƒ',
      'å…·ä½“çš„ãªå®Ÿè£…æ‰‹é †',
      'ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚„ãƒ‡ãƒ¢',
      'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚„ç™ºå±•çš„ãªå†…å®¹'
    ],
    outputFormat: `è©³ç´°è¦ç´„:
ä»¥ä¸‹ã®è¦ç´ ã‚’å­¦ç¿’è€…å‘ã‘ã«ç®‡æ¡æ›¸ãã§è¨˜è¼‰ï¼ˆå„é …ç›®ã¯ã€Œãƒ»ã€ã§é–‹å§‹ï¼‰ï¼š
ãƒ»å­¦ç¿’å†…å®¹ãƒ»ã‚´ãƒ¼ãƒ«ï¼ˆä½•ã‚’å­¦ã³ã€ä½•ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‹ï¼‰
ãƒ»å‰æçŸ¥è­˜ãƒ»ç’°å¢ƒï¼ˆå¿…è¦ãªã‚¹ã‚­ãƒ«ã€ãƒ„ãƒ¼ãƒ«ã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰
ãƒ»å®Ÿè£…æ‰‹é †ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®å…·ä½“çš„ãªæ‰‹é †ï¼‰
ãƒ»ã‚³ãƒ¼ãƒ‰ä¾‹ãƒ»ãƒ‡ãƒ¢ï¼ˆä¸»è¦ãªã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚„å®Ÿè¡Œä¾‹ï¼‰
ãƒ»æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆå­¦ç¿’å¾Œã®ç™ºå±•çš„ãªå†…å®¹ã‚„é–¢é€£ãƒˆãƒ”ãƒƒã‚¯ï¼‰`
  },

  'tech-intro': {
    type: 'tech-intro',
    systemPrompt: 'æŠ€è¡“ç´¹ä»‹è¨˜äº‹ã¨ã—ã¦åˆ†æã—ã¦ãã ã•ã„ã€‚',
    analysisPoints: [
      'æŠ€è¡“ã®æ¦‚è¦ã¨åŸºæœ¬æ¦‚å¿µ',
      'ä¸»è¦ãªç‰¹å¾´ã¨æ©Ÿèƒ½',
      'å®Ÿéš›ã®åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã‚„é©ç”¨ä¾‹',
      'ãƒ¡ãƒªãƒƒãƒˆã¨ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ',
      'é¡ä¼¼æŠ€è¡“ã¨ã®æ¯”è¼ƒã‚„ä»£æ›¿æ¡ˆ'
    ],
    outputFormat: `è©³ç´°è¦ç´„:
ä»¥ä¸‹ã®è¦ç´ ã‚’æŠ€è¡“æ¦‚è¦ã¨ã—ã¦ç®‡æ¡æ›¸ãã§è¨˜è¼‰ï¼ˆå„é …ç›®ã¯ã€Œãƒ»ã€ã§é–‹å§‹ï¼‰ï¼š
ãƒ»æŠ€è¡“æ¦‚è¦ï¼ˆä½•ã§ã‚ã‚‹ã‹ã€åŸºæœ¬çš„ãªä»•çµ„ã¿ã‚„æ¦‚å¿µï¼‰
ãƒ»ä¸»ãªç‰¹å¾´ï¼ˆä»–ã¨å·®åˆ¥åŒ–ã•ã‚Œã‚‹ä¸»è¦ãªæ©Ÿèƒ½ã‚„ç‰¹æ€§ï¼‰
ãƒ»åˆ©ç”¨ã‚·ãƒ¼ãƒ³ï¼ˆå®Ÿéš›ã«ã©ã®ã‚ˆã†ãªå ´é¢ã§ä½¿ã‚ã‚Œã‚‹ã‹ã€å…·ä½“ä¾‹ï¼‰
ãƒ»ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆï¼ˆåˆ©ç‚¹ã¨æ¬ ç‚¹ã€ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ï¼‰
ãƒ»é–¢é€£æŠ€è¡“ãƒ»ä»£æ›¿æ¡ˆï¼ˆé¡ä¼¼æŠ€è¡“ã¨ã®æ¯”è¼ƒã€é¸æŠåŸºæº–ï¼‰`
  },

  'implementation': {
    type: 'implementation',
    systemPrompt: 'å®Ÿè£…ãƒ¬ãƒãƒ¼ãƒˆè¨˜äº‹ã¨ã—ã¦åˆ†æã—ã¦ãã ã•ã„ã€‚',
    analysisPoints: [
      'ä½œæˆã—ãŸã‚‚ã®ã®æ¦‚è¦',
      'ä½¿ç”¨ã—ãŸæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯',
      'å®Ÿè£…ä¸Šã®å·¥å¤«ã‚„ç‰¹å¾´',
      'ç›´é¢ã—ãŸèª²é¡Œã¨è§£æ±ºæ–¹æ³•',
      'å­¦ã³ã‚„ä»Šå¾Œã®æ”¹å–„ç‚¹'
    ],
    outputFormat: `è©³ç´°è¦ç´„:
ä»¥ä¸‹ã®è¦ç´ ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå ±å‘Šã¨ã—ã¦ç®‡æ¡æ›¸ãã§è¨˜è¼‰ï¼ˆå„é …ç›®ã¯ã€Œãƒ»ã€ã§é–‹å§‹ï¼‰ï¼š
ãƒ»ä½œã£ãŸã‚‚ã®ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¦‚è¦ã€ç›®çš„ã€æ©Ÿèƒ½ï¼‰
ãƒ»ä½¿ç”¨æŠ€è¡“ãƒ»ãƒ„ãƒ¼ãƒ«ï¼ˆæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰
ãƒ»å·¥å¤«ç‚¹ãƒ»ç‰¹å¾´ï¼ˆç‹¬è‡ªã®å®Ÿè£…ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æ±ºå®šã€UI/UXã®å·¥å¤«ï¼‰
ãƒ»èª²é¡Œãƒ»æ”¹å–„ç‚¹ï¼ˆç›´é¢ã—ãŸå•é¡Œã€ç¾åœ¨ã®åˆ¶é™ã€å°†æ¥ã®æ”¹å–„æ¡ˆï¼‰
ãƒ»å­¦ã³ãƒ»æ„Ÿæƒ³ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šã˜ã¦å¾—ãŸçŸ¥è¦‹ã€æŒ¯ã‚Šè¿”ã‚Šï¼‰`
  }
};

/**
 * è¨˜äº‹ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆ
 * @param type è¨˜äº‹ã‚¿ã‚¤ãƒ—
 * @param title è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«
 * @param content è¨˜äº‹å†…å®¹
 * @returns ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
 */
export function generatePromptForArticleType(
  type: ArticleType,
  title: string,
  content: string
): string {
  const promptTemplate = ARTICLE_TYPE_PROMPTS[type];
  
  return `ä»¥ä¸‹ã®æŠ€è¡“è¨˜äº‹ã‚’è©³ç´°ã«åˆ†æã—ã¦ãã ã•ã„ã€‚
${promptTemplate.systemPrompt}

ã‚¿ã‚¤ãƒˆãƒ«: ${title}
å†…å®¹: ${content.substring(0, 4000)}

ã€åˆ†æè¦³ç‚¹ã€‘
${promptTemplate.analysisPoints.map((point, index) => `${index + 1}. ${point}`).join('\n')}

ã€å›ç­”å½¢å¼ã€‘
â€»é‡è¦: å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ©ãƒ™ãƒ«ï¼ˆè¦ç´„:ã€è©³ç´°è¦ç´„:ã€ã‚¿ã‚°:ï¼‰ã®ã¿è¨˜è¼‰ã—ã€ãã‚Œä»¥å¤–ã®èª¬æ˜ã‚„æŒ‡ç¤ºæ–‡ã¯ä¸€åˆ‡å«ã‚ãªã„ã§ãã ã•ã„ã€‚
â€»çµ¶å¯¾ã«å®ˆã‚‹ã¹ããƒ«ãƒ¼ãƒ«ï¼š
- ã€Œã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰åˆ¤æ–­ã™ã‚‹ã¨ã€ã€Œè¨˜äº‹ã®ä¸»é¡Œã¯ã€ã€Œã“ã®è¨˜äº‹ã¯ã€ã€Œæœ¬è¨˜äº‹ã¯ã€ãªã©ã®å‰ç½®ãæ–‡è¨€ã‚’ä½¿ã‚ãªã„
- è¦ç´„ã¯ç›´æ¥çš„ã§ç°¡æ½”ã«ã€å†…å®¹ãã®ã‚‚ã®ã‹ã‚‰å§‹ã‚ã‚‹
- è©³ç´°è¦ç´„ã‚‚åŒæ§˜ã«ã€å‰ç½®ããªã—ã§ç›´æ¥å†…å®¹ã‚’è¨˜è¼‰ã™ã‚‹

è¦ç´„:
è¨˜äº‹ã®è¦ç‚¹ã‚’100-120æ–‡å­—ã§ç›´æ¥çš„ã«è¦ç´„ã€‚ä¸»è¦ãªå†…å®¹ã¨ä¾¡å€¤ã‚’æ˜ç¢ºã«ä¼ãˆã‚‹ã€‚å‰ç½®ãæ–‡è¨€ã¯ä¸€åˆ‡ä½¿ã‚ãšã€å†…å®¹ã‹ã‚‰å§‹ã‚ã‚‹ã€‚å¥ç‚¹ã§çµ‚äº†ã€‚æ–‡å­—æ•°å³å®ˆã€‚

${promptTemplate.outputFormat}

ã‚¿ã‚°:
æŠ€è¡“å,ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å,ã‚«ãƒ†ã‚´ãƒªå,æ¦‚å¿µå

ã€ã‚¿ã‚°ã®ä¾‹ã€‘
JavaScript, React, ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰, çŠ¶æ…‹ç®¡ç†`;
}

/**
 * è¨˜äº‹ã‚¿ã‚¤ãƒ—ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©ã‚’å–å¾—
 * @param type è¨˜äº‹ã‚¿ã‚¤ãƒ—
 * @returns ã‚»ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©
 */
export function getArticleTypeSections(type: ArticleType) {
  const sections: Record<ArticleType, Array<{ key: string; title: string; icon: string }>> = {
    'release': [
      { key: 'overview', title: 'æ–°æ©Ÿèƒ½ã®æ¦‚è¦', icon: 'ğŸš€' },
      { key: 'features', title: 'ä¸»ãªæ©Ÿèƒ½ãƒ»ç‰¹å¾´', icon: 'âœ¨' },
      { key: 'usage', title: 'åˆ©ç”¨æ–¹æ³•ãƒ»æ‰‹é †', icon: 'ğŸ“–' },
      { key: 'usecase', title: 'å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹', icon: 'ğŸ‘¥' },
      { key: 'limitations', title: 'æ–™é‡‘ãƒ»åˆ¶ç´„äº‹é …', icon: 'âš ï¸' }
    ],
    'problem-solving': [
      { key: 'background', title: 'æŠ€è¡“çš„èƒŒæ™¯', icon: 'ğŸ“‹' },
      { key: 'problem', title: 'è§£æ±ºã™ã‚‹å•é¡Œ', icon: 'â“' },
      { key: 'solution', title: 'è§£æ±ºç­–', icon: 'ğŸ’¡' },
      { key: 'implementation', title: 'å®Ÿè£…æ–¹æ³•', icon: 'ğŸ”§' },
      { key: 'effects', title: 'æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ', icon: 'ğŸ“ˆ' },
      { key: 'cautions', title: 'æ³¨æ„ç‚¹', icon: 'âš ï¸' }
    ],
    'tutorial': [
      { key: 'goal', title: 'å­¦ç¿’å†…å®¹ãƒ»ã‚´ãƒ¼ãƒ«', icon: 'ğŸ¯' },
      { key: 'prerequisites', title: 'å‰æçŸ¥è­˜ãƒ»ç’°å¢ƒ', icon: 'ğŸ“š' },
      { key: 'steps', title: 'å®Ÿè£…æ‰‹é †', icon: 'ğŸ“' },
      { key: 'examples', title: 'ã‚³ãƒ¼ãƒ‰ä¾‹ãƒ»ãƒ‡ãƒ¢', icon: 'ğŸ’»' },
      { key: 'next', title: 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—', icon: 'â¡ï¸' }
    ],
    'tech-intro': [
      { key: 'overview', title: 'æŠ€è¡“æ¦‚è¦', icon: 'ğŸ”' },
      { key: 'features', title: 'ä¸»ãªç‰¹å¾´', icon: 'â­' },
      { key: 'usecases', title: 'åˆ©ç”¨ã‚·ãƒ¼ãƒ³', icon: 'ğŸ¯' },
      { key: 'comparison', title: 'ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ', icon: 'âš–ï¸' },
      { key: 'alternatives', title: 'é–¢é€£æŠ€è¡“ãƒ»ä»£æ›¿æ¡ˆ', icon: 'ğŸ”„' }
    ],
    'implementation': [
      { key: 'what', title: 'ä½œã£ãŸã‚‚ã®', icon: 'ğŸ› ï¸' },
      { key: 'tech', title: 'ä½¿ç”¨æŠ€è¡“ãƒ»ãƒ„ãƒ¼ãƒ«', icon: 'âš¡' },
      { key: 'features', title: 'å·¥å¤«ç‚¹ãƒ»ç‰¹å¾´', icon: 'âœ¨' },
      { key: 'challenges', title: 'èª²é¡Œãƒ»æ”¹å–„ç‚¹', icon: 'ğŸ”§' },
      { key: 'learnings', title: 'å­¦ã³ãƒ»æ„Ÿæƒ³', icon: 'ğŸ’­' }
    ]
  };
  
  return sections[type];
}