# コード品質の問題点と改善候補

## 1. スクリプトの重複と整理不足

### 問題点
- scriptsディレクトリに60以上のスクリプトが散在
- 類似機能のスクリプトが複数存在：
  - generate-summaries.ts vs regenerate-summaries.ts vs generate-missing-summaries.ts
  - fix-quality-scores.ts vs calculate-quality-scores.ts
  - check-*.ts系の多数のチェックスクリプト
- 共通処理の重複実装

### 改善案
- スクリプトを機能別にディレクトリ分け
- 共通処理をユーティリティに切り出し
- CLIツールとして統合（例：npm run manage summaries --regenerate）

## 2. フェッチャーの実装パターンの不統一

### 問題点
- RSS系とAPI系で異なる実装パターン
- エラーハンドリングの一貫性不足
- 品質フィルタリングロジックが各フェッチャーに分散

### 改善案
- 共通インターフェースの強化
- フィルタリング戦略パターンの導入
- エラーハンドリングの標準化

## 3. コンポーネントの責務分離

### 問題点
- 一部のページコンポーネントにビジネスロジックが混在
- データフェッチとUI表示が密結合
- 状態管理の分散

### 改善案
- カスタムフックへのロジック抽出
- データフェッチ層の明確化
- 状態管理の集約（Context/Zustand等）

## 4. 型定義の重複と不整合

### 問題点
- Article関連の型が複数箇所で定義
- Prismaスキーマとの型の乖離リスク
- any型の使用が散見される

### 改善案
- 型定義の一元管理
- Prisma型の活用強化
- 厳格な型チェックの導入

## 5. テストの不足

### 問題点
- ユニットテストがほぼ存在しない
- 品質スコア計算などの重要ロジックが未テスト
- E2Eテストの未整備

### 改善案
- 重要ロジックから段階的にテスト追加
- テストカバレッジ目標の設定
- CI/CDでのテスト自動実行