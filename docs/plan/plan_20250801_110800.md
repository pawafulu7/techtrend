# 詳細要約表示A/Bテスト実装計画

## 計画日時
2025-08-01 11:08:00

## 要件
- 詳細要約の表示形式を記事IDの偶数・奇数で切り替える
- 個人利用のためクッキーやデータベースでの制御は不要
- シンプルな実装を重視

## A/Bテストの実装方針

### パターンA（記事IDが偶数）：構造化リスト形式
- 見出し付きのセクション分割
- アイコンと太字で視覚的な区切り
- 重要部分のハイライト

### パターンB（記事IDが奇数）：カード形式
- 各観点を個別のカードで表示
- グリッドレイアウトでレスポンシブ対応
- shadcn/uiのCardコンポーネント活用

## 実装タスク

### 1. コンポーネント作成
**優先度: 高**

#### 1-1. DetailedSummaryDisplay コンポーネント作成
- ファイル: `/app/components/article/detailed-summary-display.tsx`
- 記事IDに基づく表示切り替えロジック
- 両パターンの表示コンポーネント内包

#### 1-2. DetailedSummaryStructured コンポーネント作成
- ファイル: `/app/components/article/detailed-summary-structured.tsx`
- 構造化リスト形式の実装
- アイコンとハイライト機能

#### 1-3. DetailedSummaryCards コンポーネント作成
- ファイル: `/app/components/article/detailed-summary-cards.tsx`
- カード形式の実装
- レスポンシブグリッドレイアウト

### 2. 要約パース機能
**優先度: 高**

#### 2-1. パースユーティリティ作成
- ファイル: `/lib/utils/summary-parser.ts`
- 詳細要約を6つのセクションに分割
- 各セクションのタイトルと内容を抽出

### 3. 既存ファイルの修正
**優先度: 高**

#### 3-1. 記事詳細ページの更新
- ファイル: `/app/articles/[id]/page.tsx`
- 既存の要約表示部分を新コンポーネントに置き換え
- 記事IDをコンポーネントに渡す

### 4. スタイリング調整
**優先度: 中**

#### 4-1. カスタムスタイルの追加
- 必要に応じてTailwindクラスを追加
- アイコンの配置とサイズ調整
- ハイライト表示のスタイル定義

## ファイル変更計画

### 新規作成
1. `/app/components/article/detailed-summary-display.tsx` - メインコンポーネント
2. `/app/components/article/detailed-summary-structured.tsx` - 構造化リスト表示
3. `/app/components/article/detailed-summary-cards.tsx` - カード表示
4. `/lib/utils/summary-parser.ts` - 要約パースユーティリティ

### 修正
1. `/app/articles/[id]/page.tsx` - 記事詳細ページ（121-127行目を置換）

### 削除
- なし

## テスト戦略

### 手動テスト
1. 偶数ID記事で構造化リスト表示を確認
2. 奇数ID記事でカード表示を確認
3. レスポンシブ動作の確認（モバイル、タブレット、デスクトップ）
4. 長文要約での表示崩れチェック

### 自動テスト
- 今回は個人利用のA/Bテストのため、手動テストを重視
- 将来的にはパースロジックの単体テストを追加

## リスク分析と対策

### リスク1: パース処理の失敗
- **対策**: フォールバックとして元の表示形式を維持
- **実装**: try-catchでエラーハンドリング

### リスク2: レスポンシブ対応の不具合
- **対策**: 各ブレークポイントでの表示確認
- **実装**: Tailwindのレスポンシブクラスを適切に使用

### リスク3: パフォーマンスへの影響
- **対策**: パース処理を最小限に抑える
- **実装**: メモ化やキャッシュは今回は不要（シンプル実装）

## スケジュール見積もり

1. コンポーネント作成: 2時間
2. パース機能実装: 1時間
3. 既存ファイル修正: 30分
4. スタイリング調整: 1時間
5. テスト: 30分

**合計: 約5時間**

## 実装の優先順位

1. パースユーティリティの作成（基盤となるため）
2. DetailedSummaryDisplay コンポーネント（切り替えロジック）
3. 各表示形式のコンポーネント（並行実装可能）
4. 既存ページの修正
5. スタイリング微調整

## 次のステップ

1. 実装開始の承認を得る
2. パースユーティリティから順次実装
3. 各コンポーネントを作成
4. 統合テスト実施
5. フィードバックに基づく調整